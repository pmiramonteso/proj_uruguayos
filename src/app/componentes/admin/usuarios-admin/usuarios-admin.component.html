<div class="container mx-auto p-4">
    <h1 class="text-2xl font-bold text-gray-700 mb-4">Gestión de Usuarios</h1>
  
    <!-- Botón para desplegar el formulario -->
    <div class="flex justify-end mb-4">
      <button
        (click)="toggleForm()"
        class="bg-teal-400 hover:bg-teal-600 text-white font-medium py-2 px-4 rounded-md"
      >
        Añadir Usuario
      </button>
    </div>
  
    <!-- Formulario -->
    @if(showForm) {
    <div class="bg-white shadow-md rounded p-4 mb-6">
      <h2 class="text-lg font-bold text-gray-600 mb-4">Añadir o Editar Usuario</h2>
      <form (ngSubmit)="guardarUsuario()" class="space-y-4">
        <div class="grid grid-cols-2 gap-4">
          <!-- Campo Nombre -->
          <div>
            <label for="nombre" class="block text-sm font-medium text-gray-700">Nombre</label>
            <input
              [(ngModel)]="currentUser.nombre"
              name="nombre"
              type="text"
              id="nombre"
              class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
            />
          </div>
  
          <!-- Campo Apellidos -->
          <div>
            <label for="apellidos" class="block text-sm font-medium text-gray-700">Apellidos</label>
            <input
              [(ngModel)]="currentUser.apellidos"
              name="apellidos"
              type="text"
              id="apellidos"
              class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
            />
          </div>
  
          <!-- Campo Email -->
          <div>
            <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
            <input
              [(ngModel)]="currentUser.email"
              name="email"
              type="email"
              id="email"
              class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
            />
          </div>
  
          <!-- Campo Contraseña -->
          <div>
            <label for="password" class="block text-sm font-medium text-gray-700">Contraseña</label>
            <input
              [(ngModel)]="currentUser.password"
              name="password"
              type="password"
              id="password"
              class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
            />
          </div>
  
          <!-- Campo Roles -->
          <div>
            <label for="roles" class="block text-sm font-medium text-gray-700">Rol</label>
            <select
              [(ngModel)]="currentUser.roles"
              name="roles"
              id="roles"
              class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
            >
              <option value="admin">Admin</option>
              <option value="user">Usuario</option>
            </select>
          </div>
        </div>
  
        <!-- Botón Guardar -->
        <div class="flex justify-end">
          <button type="submit" class="bg-teal-400 hover:bg-teal-600 text-white font-medium py-2 px-4 rounded-md">
            Guardar
          </button>
        </div>
      </form>
    </div>
}
  
    <!-- Tabla de Usuarios -->
    <div class="bg-white shadow-md rounded">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nombre</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Apellidos</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Email</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Rol</th>
            <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Acciones</th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
            @for (user of usuarios; track usuarios) {
            <tr>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ user.id_user }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ user.nombre }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ user.apellidos }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ user.email }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ user.roles }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
              <!-- Botón Editar -->
              <button
                (click)="editarUsuario(user)"
                class="bg-yellow-500 hover:bg-yellow-600 text-white font-medium py-1 px-2 rounded-md mr-2"
              >
                Editar
              </button>
  
              <!-- Botón Eliminar -->
              <button
                (click)="eliminarUsuario(user.id_user)"
                class="bg-red-500 hover:bg-red-600 text-white font-medium py-1 px-2 rounded-md"
              >
                Eliminar
              </button>
            </td>
          </tr>
        }
        </tbody>
      </table>
    </div>
  </div>
